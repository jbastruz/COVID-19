--- 
title: "COVID 19 - a Bayesian Modeling"
author: "Juan Ignacio de Oyarbide & Jean-Baptiste Astruz"
date: "06/04/2020"
documentclass: book
link-citations: yes
site: bookdown::bookdown_site
description: "A nice presentation to show our results about COVID-19 confirmed cases
  estimation"
---

```{r, setup, include=FALSE, eval=TRUE}
library(highcharter)
library(dplyr)
library(viridisLite)
library(forecast)
library(treemap)
library(flexdashboard)
knitr::opts_chunk$set(echo = FALSE)
source("Utilities.R")
load("C:/Users/jeanbaptiste.astruz/OneDrive - ADDACTIS GROUP/Travail/R/PlotPandemic/run_Result_R.RData")
```


# Introduction

Governments have been taking strict measures to slowdown the COVID-19 pandemic or to "flatten the curve". The main reason is funded on avoiding a shortfall of health care resources while buying time to learn about the disease. In the other hand, current lockdowns are provoking collateral problems, especially in fragile economies, which concerns about the actual sustainability of the system. \
Under this context, insurance companies need to have a comprehensive and cross-functional view in order to go in line with public decisions and adapt to the society's reponse. It is critical to constantly evaluate the spread of the virus and assess potential scenarios that may arise during this crisis.\
With the goal of representing the virus evolution in the following weeks, we propose a dynamic probabilistic framework to estimate the number of confirmed cases in several countries. The structure is based on a Gompertz model whose parameters describe outbreak delay, growth rate and final point. We rely on Bayesian inference that provides a mathematical architecture to 1) Propagate uncertainty from model assumptions to predictions, 2) partially-pool estimates towards the overall common behavior of the pandemic (“borrowing strength” property).


# Data source

```{r, echo=TRUE, out.width = 'auto', fig.height=5, fig.align='center'}

datatable(tmpdb_1, class = 'cell-border stripe')
Country = levels(tmpdb_1$Country.Region)
NbCountryInit = length(levels(as.factor(tmpdb_1$Country.Region)))

fig = plotListInit(NbCountryInit)
fig %>% subplot(nrows = 3)

```

# Model estimates

```{r, echo=FALSE, warning = FALSE, out.width = 'auto', fig.height=5, fig.align='center'}

fig = plotList(NbCountryProj)
fig %>% subplot(nrows = 3)

```

<!-- ## Model specification -->

<!-- \begin{gather*} -->

<!-- y_{jt} \sim Lognormal(\mu_{jt},\sigma_{jt})\\ -->

<!-- \mu_{jt}=a_j \text{ } exp ({-b_j \text{ } exp({-c_j\text{ } \times\text{ } t}}))\\ -->

<!-- \sigma_{jt} \sim studentT (5,0,1.5)\\ -->

<!-- a_j \sim Normal^+(a_{intercept},\sigma_a)\\ -->

<!-- b_j \sim Normal(b_{intercept},\sigma_b)\\ -->

<!-- c_j \sim Normal(c_{intercept}+ \beta_{lockdown} \times \sigma_{lockdown}+\beta_{density} \times \sigma_{density} + \beta_{tests} \times \sigma_{tests} + \beta_{Density:tests} \times \sigma_{Density:tests},\sigma_c)\\ -->

<!-- a_{intercept} \sim Gamma(3,0.5)\\ -->

<!-- b_{intercept} \sim Normal^+(5,10)\\ -->

<!-- c_{intercept} \sim Normal^+(0.1,0.5)\\ -->

<!-- \sigma_a \sim Cauchy^+(0,10)\\ -->

<!-- \sigma_b \sim Cauchy^+(0,25)\\ -->

<!-- \sigma_c \sim Cauchy^+(0,1)\\ -->

<!-- \beta_{lockdown}\sim Normal(0,\sigma_{lockdown})\\ -->

<!-- \beta_{density}\sim Normal(0,\sigma_{density})\\ -->

<!-- \beta_{tests}\sim Normal(0,\sigma_{tests})\\ -->

<!-- \beta_{Density:tests}\sim Normal(0,\sigma_{Density:tests})\\ -->

<!-- \sigma_{lockdown}\sim Cauchy^+(0,10)\\ -->

<!-- \sigma_{density}\sim Cauchy^+(0,30)\\ -->

<!-- \sigma_{tests}\sim Cauchy^+(0,20)\\ -->

<!-- \sigma_{Density:tests})\sim Cauchy^+(0,50)\\ -->

<!-- \end{gather*} -->